<div class="query-form p-6 bg-white shadow-md rounded-lg">
  <h3 class="text-xl mb-4 font-bold">SELECT QUERIES</h3>
  <form (ngSubmit)="onSubmit()">
    <!-- Table Name -->
    <div class="mb-4">
      <label for="table" class="block font-medium">Table Name</label>
      <input
        id="table"
        [(ngModel)]="query.table"
        name="table"
        class="input w-full p-2 border rounded"
        placeholder="Enter table name"
        required
      />
    </div>
    <!-- Fields to Select -->
    <div class="mb-4">
      <label for="fields" class="block font-medium">Fields to Select</label>
      <input
        id="fields"
        [(ngModel)]="query.fields"
        name="fields"
        class="input w-full p-2 border rounded"
        placeholder="Enter fields (comma-separated, e.g., id, name)"
      />
    </div>
    <!-- Filters (WHERE clause) -->
    <div class="mb-4">
      <label class="block font-medium mb-2">Filters (WHERE Clause)</label>
      <div *ngFor="let filter of query.filters; let i = index" class="mb-2">
        <div class="flex items-center gap-2 mb-2">
          <input
            type="text"
            [(ngModel)]="filter.field"
            name="filterField{{ i }}"
            class="input w-1/3 p-2 border rounded"
            placeholder="Field"
          />
          <select
            [(ngModel)]="filter.operator"
            name="filterOperator{{ i }}"
            class="w-1/4 p-2 border rounded"
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value="<">&lt;</option>
            <option value=">=">&gt;=</option>
            <option value="<=">&lt;=</option>
            <option value="LIKE">LIKE</option>
          </select>
          <input
            type="text"
            [(ngModel)]="filter.value"
            name="filterValue{{ i }}"
            class="input w-1/3 p-2 border rounded"
            placeholder="Value"
          />
          <button
            type="button"
            (click)="removeFilter(i)"
            class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600"
          >
            Remove
          </button>
        </div>
      </div>
      <button
        type="button"
        (click)="addFilter()"
        class="bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600"
      >
        Add Filter
      </button>
    </div>
    <!-- Sorting ORDER BY-->
    <div class="mb-4">
      <label class="block font-medium">Sort By (ORDER BY)</label>
      <div class="flex items-center gap-2">
        <input
          type="text"
          [(ngModel)]="query.orderBy.field"
          name="orderByField"
          class="input w-2/3 p-2 border rounded"
          placeholder="Field to sort by"
        />
        <select
          [(ngModel)]="query.orderBy.direction"
          name="orderByDirection"
          class="w-1/3 p-2 border rounded"
        >
          <option value="ASC">Ascending</option>
          <option value="DESC">Descending</option>
        </select>
      </div>
    </div>
    <!-- Limit -->
    <div class="mb-4">
      <label for="limit" class="block font-medium">Limit</label>
      <input
        type="number"
        id="limit"
        [(ngModel)]="query.limit"
        name="limit"
        class="input w-full p-2 border rounded"
        placeholder="Maximum number of records"
        min="1"
      />
    </div>
    <!-- Preview Section -->
    <div *ngIf="query.table" class="mb-4">
      <h4 class="font-medium">Query Preview</h4>
      <p class="text-sm bg-gray-100 p-2 rounded">
        SELECT
        <span *ngIf="query.fields">{{ query.fields }}</span>
        <span *ngIf="!query.fields"> *</span>
        FROM <strong>{{ query.table }}</strong>
        <span *ngIf="query.filters.length > 0">
          WHERE
          <span
            *ngFor="let filter of query.filters; let i = index"
          >
            {{ filter.field }} {{ filter.operator }} '{{ filter.value }}'
            <span *ngIf="i < query.filters.length - 1">AND</span>
          </span>
        </span>
        <span *ngIf="query.orderBy.field">
          ORDER BY {{ query.orderBy.field }} {{ query.orderBy.direction }}
        </span>
        <span *ngIf="query.limit">LIMIT {{ query.limit }}</span>
      </p>
    </div>
    <!-- Submit Button -->
    <div class="mb-4">
      <button
        type="submit"
        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
      >
        Generate Query
      </button>
    </div>
  </form>
</div>
